"use strict";(self.webpackChunkoffice_addin_taskpane_react=self.webpackChunkoffice_addin_taskpane_react||[]).push([[777],{58677:function(t,e,n){n.d(e,{startRecording:function(){return St}});var o=n(7328),s=n(16059),r=n(55407),i=n(12452),a=n(80320),u=n(52999),c=n(80886);const l={FullSnapshot:2,IncrementalSnapshot:3,Meta:4,Focus:6,ViewEnd:7,VisualViewport:8,FrustrationRecord:9},d={Document:0,DocumentType:1,Element:2,Text:3,CDATA:4,DocumentFragment:11},f={Mutation:0,MouseMove:1,MouseInteraction:2,Scroll:3,ViewportResize:4,Input:5,TouchMove:6,MediaInteraction:7,StyleSheetRule:8},p={MouseUp:0,MouseDown:1,Click:2,ContextMenu:3,DblClick:4,Focus:5,Blur:6,TouchStart:7,TouchEnd:9},m={Play:0,Pause:1};var h=n(28448);function g(t){return Boolean(t.changedTouches)}function y(t){return!0===t.composed&&(0,h.XS)(t.target)?t.composedPath()[0]:t.target}const v=(t,e)=>{const n=window.visualViewport,o={layoutViewportX:t,layoutViewportY:e,visualViewportX:t,visualViewportY:e};return n?(!function(t){return Math.abs(t.pageTop-t.offsetTop-window.scrollY)>25||Math.abs(t.pageLeft-t.offsetLeft-window.scrollX)>25}(n)?(o.visualViewportX=Math.round(t-n.offsetLeft),o.visualViewportY=Math.round(e-n.offsetTop)):(o.layoutViewportX=Math.round(t+n.offsetLeft),o.layoutViewportY=Math.round(e+n.offsetTop)),o):o},w=t=>({scale:t.scale,offsetLeft:t.offsetLeft,offsetTop:t.offsetTop,pageLeft:t.pageLeft,pageTop:t.pageTop,height:t.height,width:t.width});var S=n(29336);function x(t,e){return{data:{source:t,...e},type:l.IncrementalSnapshot,timestamp:(0,S.nx)()}}const T=50;function E(t,e,n){const{throttled:o,cancel:s}=(0,u.n)(t=>{const o=y(t),s=e.nodeIds.get(o);if(void 0===s)return;const r=b(t);if(!r)return;const i={id:s,timeOffset:0,x:r.x,y:r.y};n(x(g(t)?f.TouchMove:f.MouseMove,{positions:[i]}))},T,{trailing:!1}),{stop:r}=(0,c.l)(t,document,["mousemove","touchmove"],o,{capture:!0,passive:!0});return{stop:()=>{r(),s()}}}function b(t){let{clientX:e,clientY:n}=g(t)?t.changedTouches[0]:t;if(window.visualViewport){const{visualViewportX:t,visualViewportY:o}=v(e,n);e=t,n=o}if(Number.isFinite(e)&&Number.isFinite(n))return{x:e,y:n}}const N={pointerup:p.MouseUp,mousedown:p.MouseDown,click:p.Click,contextmenu:p.ContextMenu,dblclick:p.DblClick,focus:p.Focus,blur:p.Blur,touchstart:p.TouchStart,touchend:p.TouchEnd};function I(t,e,n,o){return(0,c.l)(t,document,Object.keys(N),s=>{const r=y(s),i=e.nodeIds.get(r);if(void 0===i||(0,h.PJ)(r,t.defaultPrivacyLevel)===h.$m.HIDDEN)return;const a=N[s.type];let u;if(a!==p.Blur&&a!==p.Focus){const t=b(s);if(!t)return;u={id:i,type:a,x:t.x,y:t.y}}else u={id:i,type:a};const c={id:o.getIdForEvent(s),...x(f.MouseInteraction,u)};n(c)},{capture:!0,passive:!0})}const C=100;function R(t,e,n,o,s=document){const{throttled:r,cancel:i}=(0,u.n)(s=>{const r=y(s);if(!r)return;const i=e.nodeIds.get(r);if(void 0===i||(0,h.PJ)(r,t.defaultPrivacyLevel)===h.$m.HIDDEN)return;const a=r===document?{scrollTop:(0,h.zL)(),scrollLeft:(0,h.Gn)()}:{scrollTop:Math.round(r.scrollTop),scrollLeft:Math.round(r.scrollLeft)};o.set(r,a),n(x(f.Scroll,{id:i,x:a.scrollLeft,y:a.scrollTop}))},C),{stop:a}=(0,c.q)(t,s,"scroll",r,{capture:!0,passive:!0});return{stop:()=>{a(),i()}}}const D=200;function M(t,e){const n=(0,h.g1)(t).subscribe(t=>{e(x(f.ViewportResize,t))});return{stop:()=>{n.unsubscribe()}}}function _(t,e){const n=window.visualViewport;if(!n)return{stop:u.l};const{throttled:o,cancel:s}=(0,u.n)(()=>{e({data:w(n),type:l.VisualViewport,timestamp:(0,S.nx)()})},D,{trailing:!1}),{stop:r}=(0,c.l)(t,n,["resize","scroll"],o,{capture:!0,passive:!0});return{stop:()=>{r(),s()}}}function L(t,e,n){return(0,c.l)(t,document,["play","pause"],o=>{const s=y(o);if(!s)return;const r=e.nodeIds.get(s);void 0!==r&&(0,h.PJ)(s,t.defaultPrivacyLevel)!==h.$m.HIDDEN&&n(x(f.MediaInteraction,{id:r,type:"play"===o.type?m.Play:m.Pause}))},{capture:!0,passive:!0})}var O=n(23054);function z(t,e){function n(e,n){if(!e||!e.ownerNode)return;const o=t.nodeIds.get(e.ownerNode);void 0!==o&&n(o)}const o=[(0,O.H)(CSSStyleSheet.prototype,"insertRule",({target:t,parameters:[o,s]})=>{n(t,t=>e(x(f.StyleSheetRule,{id:t,adds:[{rule:o,index:s}]})))}),(0,O.H)(CSSStyleSheet.prototype,"deleteRule",({target:t,parameters:[o]})=>{n(t,t=>e(x(f.StyleSheetRule,{id:t,removes:[{index:o}]})))})];function s(t){o.push((0,O.H)(t.prototype,"insertRule",({target:t,parameters:[o,s]})=>{n(t.parentStyleSheet,n=>{const r=k(t);r&&(r.push(s||0),e(x(f.StyleSheetRule,{id:n,adds:[{rule:o,index:r}]})))})}),(0,O.H)(t.prototype,"deleteRule",({target:t,parameters:[o]})=>{n(t.parentStyleSheet,n=>{const s=k(t);s&&(s.push(o),e(x(f.StyleSheetRule,{id:n,removes:[{index:s}]})))})}))}return"undefined"!=typeof CSSGroupingRule?s(CSSGroupingRule):(s(CSSMediaRule),s(CSSSupportsRule)),{stop:()=>{o.forEach(t=>t.stop())}}}function k(t){const e=[];let n=t;for(;n.parentRule;){const t=Array.from(n.parentRule.cssRules).indexOf(n);e.unshift(t),n=n.parentRule}if(!n.parentStyleSheet)return;const o=Array.from(n.parentStyleSheet.cssRules).indexOf(n);return e.unshift(o),e}function A(t,e){return(0,c.l)(t,window,["focus","blur"],()=>{e({data:{has_focus:document.hasFocus()},type:l.Focus,timestamp:(0,S.nx)()})})}function P(t,e,n){const o=t.subscribe(12,t=>{var o,s;t.rawRumEvent.type===h.bb.ACTION&&t.rawRumEvent.action.type===h.X2.CLICK&&(null===(s=null===(o=t.rawRumEvent.action.frustration)||void 0===o?void 0:o.type)||void 0===s?void 0:s.length)&&"events"in t.domainContext&&t.domainContext.events&&t.domainContext.events.length&&e({timestamp:t.rawRumEvent.date,type:l.FrustrationRecord,data:{frustrationTypes:t.rawRumEvent.action.frustration.type,recordIds:t.domainContext.events.map(t=>n.getIdForEvent(t))}})});return{stop:()=>{o.unsubscribe()}}}function V(t,e){const n=t.subscribe(5,()=>{e({timestamp:(0,S.nx)(),type:l.ViewEnd})});return{stop:()=>{n.unsubscribe()}}}var $=n(75248);function F(t,e){const n=t.tagName,o=t.value;if((0,h.Ie)(t,e)){const e=t.type;if("INPUT"===n&&("button"===e||"submit"===e||"reset"===e))return o;if(!o||"OPTION"===n)return;return h.o}return"OPTION"===n||"SELECT"===n?t.value:"INPUT"===n||"TEXTAREA"===n?o:void 0}const H=/url\((?:(')([^']*)'|(")([^"]*)"|([^)]*))\)/gm,B=/^[A-Za-z]+:|^\/\//,G=/^["']?data:.*,/i;function J(t,e){return t.replace(H,(t,n,o,s,r,i)=>{const a=o||r||i;if(!e||!a||B.test(a)||G.test(a))return t;const u=n||s||"";return`url(${u}${function(t,e){try{return(0,$.c$)(t,e).href}catch(e){return t}}(a,e)}${u})`})}const U=/[^a-z1-6-_]/;function W(t){const e=t.toLowerCase().trim();return U.test(e)?"div":e}function X(t,e){return`data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='${t}' height='${e}' style='background-color:silver'%3E%3C/svg%3E`}function Y(t){if(void 0!==t&&0!==t.length)return t.map(t=>{const e=t.cssRules||t.rules;return{cssRules:Array.from(e,t=>t.cssText),disabled:t.disabled||void 0,media:t.media.length>0?Array.from(t.media):void 0}})}var q=n(14451);const j=1e6;function K(t,e,n,o){if(e===h.$m.HIDDEN)return null;const s=t.getAttribute(n);if(e===h.$m.MASK&&n!==h.NT&&!h.yF.includes(n)&&n!==o.actionNameAttribute){const e=t.tagName;switch(n){case"title":case"alt":case"placeholder":return h.o}if("IMG"===e&&("src"===n||"srcset"===n)){const e=t;if(e.naturalWidth>0)return X(e.naturalWidth,e.naturalHeight);const{width:n,height:o}=t.getBoundingClientRect();return n>0||o>0?X(n,o):h.eT}if("SOURCE"===e&&("src"===n||"srcset"===n))return h.eT;if("A"===e&&"href"===n)return h.o;if(s&&n.startsWith("data-"))return h.o;if("IFRAME"===e&&"srcdoc"===n)return h.o}return s&&"string"==typeof s?(0,h.ei)(s,j):s}function Z(t,e,n){t[e].count+=1,t[e].max=Math.max(t[e].max,n),t[e].sum+=n}function Q(t){if(!t)return null;let e;try{e=t.rules||t.cssRules}catch(t){}if(!e)return null;return J(Array.from(e,(0,q.nr)()?tt:et).join(""),t.href)}function tt(t){if(function(t){return"selectorText"in t}(t)&&t.selectorText.includes(":")){const e=/(\[[\w-]+[^\\])(:[^\]]+\])/g;return t.cssText.replace(e,"$1\\$2")}return et(t)}function et(t){return function(t){return"styleSheet"in t}(t)&&Q(t.styleSheet)||t.cssText}function nt(t,e,n){const o=function(t,e,n){switch(t.nodeType){case t.DOCUMENT_NODE:return function(t,e,n){return{type:d.Document,childNodes:ot(t,e,n),adoptedStyleSheets:Y(t.adoptedStyleSheets)}}(t,e,n);case t.DOCUMENT_FRAGMENT_NODE:return function(t,e,n){const o=(0,h.p_)(t);o&&n.serializationContext.shadowRootsController.addShadowRoot(t);return{type:d.DocumentFragment,childNodes:ot(t,e,n),isShadowRoot:o,adoptedStyleSheets:o?Y(t.adoptedStyleSheets):void 0}}(t,e,n);case t.DOCUMENT_TYPE_NODE:return o=t,{type:d.DocumentType,name:o.name,publicId:o.publicId,systemId:o.systemId};case t.ELEMENT_NODE:return function(t,e,n){const o=W(t.tagName),s=(i=t,"svg"===i.tagName||i instanceof SVGElement||void 0),r=(0,h.jR)((0,h.dT)(t),e);var i;if(r===h.$m.HIDDEN){const{width:e,height:n}=t.getBoundingClientRect();return{type:d.Element,tagName:o,attributes:{rr_width:`${e}px`,rr_height:`${n}px`,[h.NT]:h.Wd},childNodes:[],isSVG:s}}if(r===h.$m.IGNORE)return;const a=function(t,e,n){if(e===h.$m.HIDDEN)return{};const o={},s=W(t.tagName),r=t.ownerDocument;for(let s=0;s<t.attributes.length;s+=1){const r=t.attributes.item(s).name,i=K(t,e,r,n.configuration);null!==i&&(o[r]=i)}if(t.value&&("textarea"===s||"select"===s||"option"===s||"input"===s)){const n=F(t,e);void 0!==n&&(o.value=n)}if("option"===s&&e===h.$m.ALLOW){const e=t;e.selected&&(o.selected=e.selected)}if("link"===s){const e=Array.from(r.styleSheets).find(e=>e.href===t.href),s=Q(e);s&&e&&(Z(n.serializationContext.serializationStats,"cssText",s.length),o._cssText=s)}if("style"===s&&t.sheet){const e=Q(t.sheet);e&&(Z(n.serializationContext.serializationStats,"cssText",e.length),o._cssText=e)}const i=t;if("input"!==s||"radio"!==i.type&&"checkbox"!==i.type||(e===h.$m.ALLOW?o.checked=!!i.checked:(0,h.Ie)(i,e)&&delete o.checked),"audio"===s||"video"===s){const e=t;o.rr_mediaState=e.paused?"paused":"played"}let a,u;const c=n.serializationContext;switch(c.status){case 0:a=Math.round(t.scrollTop),u=Math.round(t.scrollLeft),(a||u)&&c.elementsScrollPositions.set(t,{scrollTop:a,scrollLeft:u});break;case 1:c.elementsScrollPositions.has(t)&&({scrollTop:a,scrollLeft:u}=c.elementsScrollPositions.get(t))}return u&&(o.rr_scrollLeft=u),a&&(o.rr_scrollTop=a),o}(t,r,n);let u=[];(0,h.wR)(t)&&"style"!==o&&(u=ot(t,r,n));return{type:d.Element,tagName:o,attributes:a,childNodes:u,isSVG:s}}(t,e,n);case t.TEXT_NODE:return function(t,e){const n=(0,h.rf)(t,e);if(void 0===n)return;return{type:d.Text,textContent:n}}(t,e);case t.CDATA_SECTION_NODE:return{type:d.CDATA,textContent:""}}var o}(t,e,n);if(!o)return null;const s=n.scope.nodeIds.assign(t),r=o;return r.id=s,n.serializedNodeIds&&n.serializedNodeIds.add(s),r}function ot(t,e,n){const o=[];return(0,h.wI)(t,t=>{const s=nt(t,e,n);s&&o.push(s)}),o}function st(t,e,n,o){const s=(0,S.nx)(),r=nt(t,e.defaultPrivacyLevel,{serializationContext:o,configuration:e,scope:n});return Z(o.serializationStats,"serializationDuration",(0,S.vk)(s,(0,S.nx)())),r}function rt(t,e,n,o=document){const s=t.defaultPrivacyLevel,r=new WeakMap,i=o!==document,{stop:a}=(0,c.l)(t,o,i?["change"]:["input","change"],t=>{const e=y(t);(e instanceof HTMLInputElement||e instanceof HTMLTextAreaElement||e instanceof HTMLSelectElement)&&d(e)},{capture:!0,passive:!0});let l;if(i)l=u.l;else{const t=[(0,O.t)(HTMLInputElement.prototype,"value",d),(0,O.t)(HTMLInputElement.prototype,"checked",d),(0,O.t)(HTMLSelectElement.prototype,"value",d),(0,O.t)(HTMLTextAreaElement.prototype,"value",d),(0,O.t)(HTMLSelectElement.prototype,"selectedIndex",d)];l=()=>{t.forEach(t=>t.stop())}}return{stop:()=>{l(),a()}};function d(t){const n=(0,h.PJ)(t,s);if(n===h.$m.HIDDEN)return;const o=t.type;let r;if("radio"===o||"checkbox"===o){if((0,h.Ie)(t,n))return;r={isChecked:t.checked}}else{const e=F(t,n);if(void 0===e)return;r={text:e}}p(t,r,e);const i=t.name;"radio"===o&&i&&t.checked&&document.querySelectorAll(`input[type="radio"][name="${CSS.escape(i)}"]`).forEach(n=>{n!==t&&p(n,{isChecked:!1},e)})}function p(t,e,o){const s=o.nodeIds.get(t);if(void 0===s)return;const i=r.get(t);i&&i.text===e.text&&i.isChecked===e.isChecked||(r.set(t,e),n(x(f.Input,{id:s,...e})))}}var it=n(42182),at=n(34144);const ut=100,ct=16;function lt(t,e,n,o,s){const r=(0,h.W3)();if(!r)return{stop:u.l,flush:u.l};const i=function(t){let e=u.l,n=[];function o(){e(),t(n),n=[]}const{throttled:s,cancel:r}=(0,u.n)(o,ct,{leading:!1});return{addMutations:t=>{0===n.length&&(e=(0,at.BB)(s,{timeout:ut})),n.push(...t)},flush:o,stop:()=>{e(),r()}}}(s=>{!function(t,e,n,o,s){const r=new Map;t.filter(t=>"childList"===t.type).forEach(t=>{t.removedNodes.forEach(t=>{dt(t,s.removeShadowRoot)})});const i=t.filter(t=>t.target.isConnected&&o.nodeIds.areAssignedForNodeAndAncestors(t.target)&&(0,h.PJ)(t.target,n.defaultPrivacyLevel,r)!==h.$m.HIDDEN),a={cssText:{count:0,max:0,sum:0},serializationDuration:{count:0,max:0,sum:0}},{adds:u,removes:c,hasBeenSerialized:l}=function(t,e,n,o,s,r){const i=new Set,a=new Map;for(const e of t)e.addedNodes.forEach(t=>{i.add(t)}),e.removedNodes.forEach(t=>{i.has(t)||a.set(t,e.target),i.delete(t)});const u=Array.from(i);c=u,c.sort((t,e)=>{const n=t.compareDocumentPosition(e);return n&Node.DOCUMENT_POSITION_CONTAINED_BY?-1:n&Node.DOCUMENT_POSITION_CONTAINS||n&Node.DOCUMENT_POSITION_FOLLOWING?1:n&Node.DOCUMENT_POSITION_PRECEDING?-1:0});var c;const l=new Set,d={status:2,serializationStats:o,shadowRootsController:s},f=[];for(const t of u){if(m(t))continue;const s=(0,h.PJ)(t.parentNode,e.defaultPrivacyLevel,r);if(s===h.$m.HIDDEN||s===h.$m.IGNORE)continue;const i=(0,S.nx)(),a=nt(t,s,{serializedNodeIds:l,serializationContext:d,configuration:e,scope:n});if(Z(o,"serializationDuration",(0,S.vk)(i,(0,S.nx)())),!a)continue;const u=(0,h.$4)(t);f.push({nextId:g(t),parentId:n.nodeIds.get(u),node:a})}const p=[];return a.forEach((t,e)=>{const o=n.nodeIds.get(t),s=n.nodeIds.get(e);void 0!==o&&void 0!==s&&p.push({parentId:o,id:s})}),{adds:f,removes:p,hasBeenSerialized:m};function m(t){const e=n.nodeIds.get(t);return void 0!==e&&l.has(e)}function g(t){let e=t.nextSibling;for(;e;){const t=n.nodeIds.get(e);if(void 0!==t)return t;e=e.nextSibling}return null}}(i.filter(t=>"childList"===t.type),n,o,a,s,r),d=function(t,e,n,o){var s;const r=[],i=new Set,a=t.filter(t=>!i.has(t.target)&&(i.add(t.target),!0));for(const t of a){if(t.target.textContent===t.oldValue)continue;const i=n.nodeIds.get(t.target);if(void 0===i)continue;const a=(0,h.PJ)((0,h.$4)(t.target),e.defaultPrivacyLevel,o);a!==h.$m.HIDDEN&&a!==h.$m.IGNORE&&r.push({id:i,value:null!==(s=(0,h.rf)(t.target,a))&&void 0!==s?s:null})}return r}(i.filter(t=>"characterData"===t.type&&!l(t.target)),n,o,r),p=function(t,e,n,o){const s=[],r=new Map,i=t.filter(t=>{const e=r.get(t.target);return(!e||!e.has(t.attributeName))&&(e?e.add(t.attributeName):r.set(t.target,new Set([t.attributeName])),!0)}),a=new Map;for(const t of i){if(t.target.getAttribute(t.attributeName)===t.oldValue)continue;const r=n.nodeIds.get(t.target);if(void 0===r)continue;const i=(0,h.PJ)(t.target,e.defaultPrivacyLevel,o),u=K(t.target,i,t.attributeName,e);let c;if("value"===t.attributeName){const e=F(t.target,i);if(void 0===e)continue;c=e}else c="string"==typeof u?u:null;let l=a.get(t.target);l||(l={id:r,attributes:{}},s.push(l),a.set(t.target,l)),l.attributes[t.attributeName]=c}return s}(i.filter(t=>"attributes"===t.type&&!l(t.target)),n,o,r);if(!(d.length||p.length||c.length||u.length))return;e(x(f.Mutation,{adds:u,removes:c,texts:d,attributes:p}),a)}(s.concat(a.takeRecords()),t,e,n,o)}),a=new r((0,it.dm)(i.addMutations));return a.observe(s,{attributeOldValue:!0,attributes:!0,characterData:!0,characterDataOldValue:!0,childList:!0,subtree:!0}),{stop:()=>{a.disconnect(),i.stop()},flush:()=>{i.flush()}}}function dt(t,e){(0,h.XS)(t)&&e(t.shadowRoot),(0,h.wI)(t,t=>dt(t,e))}const ft=(t,e,n,o)=>{const s=new Map,r={addShadowRoot:i=>{if(s.has(i))return;const a=lt(n,t,e,r,i),u=rt(t,e,n,i),c=R(t,e,n,o,i);s.set(i,{flush:()=>a.flush(),stop:()=>{a.stop(),u.stop(),c.stop()}})},removeShadowRoot:t=>{const e=s.get(t);e&&(e.stop(),s.delete(t))},stop:()=>{s.forEach(({stop:t})=>t())},flush:()=>{s.forEach(({flush:t})=>t())}};return r};function pt(t){const{emit:e,configuration:n,lifeCycle:o}=t;if(!e)throw new Error("emit function is required");const s=(n,o)=>{e(n,o),(0,i.b)("record",{record:n});const s=t.viewHistory.findView();a.$1(s.id)},r=function(){const t=new WeakMap;return{set(e,n){(e!==document||document.scrollingElement)&&t.set(e===document?document.scrollingElement:e,n)},get(e){return t.get(e)},has(e){return t.has(e)}}}(),u={nodeIds:function(){const t=new WeakMap;let e=1;const n=e=>t.get(e);return{assign:o=>{let s=n(o);return void 0===s&&(s=e++,t.set(o,s)),s},get:n,areAssignedForNodeAndAncestors:t=>{let e=t;for(;e;){if(void 0===n(e)&&!(0,h.p_)(e))return!1;e=(0,h.$4)(e)}return!0}}}()};const c=ft(n,u,s,r),{stop:d}=function(t,e,n,o,s,r,i){const a=(n,r)=>{const{width:a,height:u}=(0,h.pB)();i({data:{height:u,href:window.location.href,width:a},type:l.Meta,timestamp:n}),i({data:{has_focus:document.hasFocus()},type:l.Focus,timestamp:n});const c={cssText:{count:0,max:0,sum:0},serializationDuration:{count:0,max:0,sum:0}};i({data:{node:st(document,o,s,{status:r,elementsScrollPositions:t,serializationStats:c,shadowRootsController:e}),initialOffset:{left:(0,h.Gn)(),top:(0,h.zL)()}},type:l.FullSnapshot,timestamp:n},c),window.visualViewport&&i({data:w(window.visualViewport),type:l.VisualViewport,timestamp:n})};a((0,S.nx)(),0);const{unsubscribe:u}=n.subscribe(2,t=>{r(),a(t.startClocks.timeStamp,1)});return{stop:u}}(r,c,o,n,u,f,s);function f(){c.flush(),m.flush()}const p=function(){const t=new WeakMap;let e=1;return{getIdForEvent(n){return t.has(n)||t.set(n,e++),t.get(n)}}}(),m=lt(s,n,u,c,document),g=[m,E(n,u,s),I(n,u,s,p),R(n,u,s,r,document),M(n,s),rt(n,u,s),L(n,u,s),z(u,s),A(n,s),_(n,s),P(o,s,p),V(o,t=>{f(),s(t)})];return{stop:()=>{c.stop(),g.forEach(t=>t.stop()),d()},flushMutations:f,shadowRootsController:c}}var mt=n(79458),ht=n(93001);function gt({context:t,creationReason:e,encoder:n}){let o=0;const s=t.view.id,r={start:1/0,end:-1/0,creation_reason:e,records_count:0,has_full_snapshot:!1,index_in_view:a.K_(s),source:"browser",...t},i={cssText:{count:0,max:0,sum:0},serializationDuration:{count:0,max:0,sum:0}};return a.H5(s),{addRecord:function(t,e,s){r.start=Math.min(r.start,t.timestamp),r.end=Math.max(r.end,t.timestamp),r.records_count+=1,r.has_full_snapshot||(r.has_full_snapshot=t.type===l.FullSnapshot),e&&function(t,e){for(const n of["cssText","serializationDuration"])t[n].count+=e[n].count,t[n].max=Math.max(t[n].max,e[n].max),t[n].sum+=e[n].sum}(i,e);const a=n.isEmpty?'{"records":[':",";n.write(a+JSON.stringify(t),t=>{o+=t,s(o)})},flush:function(t){if(n.isEmpty)throw new Error("Empty segment flushed");n.write(`],${JSON.stringify(r).slice(1)}\n`),n.finish(e=>{a.L7(r.view.id,e.rawBytesCount),t(r,i,e)})}}}const yt=5*S.OY;let vt=6e4;function wt(t,e,n,o,s,r){return function(t,e,n,o){let s={status:0,nextSegmentCreationReason:"init"};const{unsubscribe:r}=t.subscribe(2,()=>{a("view_change")}),{unsubscribe:i}=t.subscribe(11,t=>{a(t.reason)});function a(t){1===s.status&&(s.segment.flush((e,o,s)=>{const r=function(t,e,n,o){const s=new FormData;s.append("segment",new Blob([t],{type:"application/octet-stream"}),`${e.session.id}-${e.start}`);const r={raw_segment_size:o,compressed_segment_size:t.byteLength,...e},i=JSON.stringify(r);return s.append("event",new Blob([i],{type:"application/json"})),{data:s,bytesCount:t.byteLength,cssText:n.cssText,isFullSnapshot:0===e.index_in_view,rawSize:o,recordCount:e.records_count,serializationDuration:n.serializationDuration}}(s.output,e,o,s.rawBytesCount);(0,mt.Kp)(t)?n.sendOnExit(r):n.send(r)}),(0,ht.DJ)(s.expirationTimeoutId)),s="stop"!==t?{status:0,nextSegmentCreationReason:t}:{status:2}}return{addRecord:(t,n)=>{if(2!==s.status){if(0===s.status){const t=e();if(!t)return;s={status:1,segment:gt({encoder:o,context:t,creationReason:s.nextSegmentCreationReason}),expirationTimeoutId:(0,ht.wg)(()=>{a("segment_duration_limit")},yt)}}s.segment.addRecord(t,n,t=>{t>vt&&a("segment_bytes_limit")})}},stop:()=>{a("stop"),r(),i()}}}(t,()=>function(t,e,n){const o=e.findTrackedSession(),s=n.findView();if(!o||!s)return;return{application:{id:t},session:{id:o.id},view:{id:s.id}}}(e.applicationId,n,o),s,r)}function St(t,e,n,i,a,c,l){const d=[],f=l||(0,s.sA)([e.sessionReplayEndpointBuilder],vt,e=>{t.notify(14,{error:e}),(0,o.A2)("Error reported to customer",{"error.message":e.message})});let p;if((0,r.d0)())({addRecord:p}=function(t){const e=(0,r.Y9)();return{addRecord:n=>{const o=t.findView();e.send("record",n,o.id)}}}(i));else{const s=wt(t,e,n,i,f,a);p=s.addRecord,d.push(s.stop);const r=function(t,e){if(!t.metricsEnabled)return{stop:u.l};const{unsubscribe:n}=e.subscribe(t=>{if("failure"===t.type||"queue-full"===t.type||"success"===t.type&&t.payload.isFullSnapshot){const r=(e=t.type,n=t.bandwidth,{cssText:{count:(s=t.payload).cssText.count,max:s.cssText.max,sum:s.cssText.sum},isFullSnapshot:s.isFullSnapshot,ongoingRequests:{count:n.ongoingRequestCount,totalSize:n.ongoingByteCount},recordCount:s.recordCount,result:e,serializationDuration:{count:s.serializationDuration.count,max:s.serializationDuration.max,sum:s.serializationDuration.sum},size:{compressed:s.bytesCount,raw:s.rawSize}});(0,o.Gk)("Segment network request metrics",{metrics:r})}var e,n,s});return{stop:n}}(c,f.observable);d.push(r.stop)}const{stop:m}=pt({emit:p,configuration:e,lifeCycle:t,viewHistory:i});return d.push(m),{stop:()=>{d.forEach(t=>t())}}}}}]);